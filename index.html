<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="referrer" content="no-referrer-when-downgrade">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mr P, we're done band</title>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&amp;display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Bangers', cursive;
      background-image: url('https://static.vecteezy.com/system/resources/previews/007/935/202/non_2x/seamless-pattern-background-for-theme-music-vector.jpg');
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
      color: #FFD700;
      text-shadow: 2px 2px 4px #000000;
    }

    #countdown {
      font-size: 120px;
      letter-spacing: 5px;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
      width: 800px;
      text-align: center;
    }

    .instrument {
      position: absolute;
      width: 100px;
      height: auto;
    }

    #trumpet {
      top: 10%;
      left: 10%;
    }

    #clarinet {
      top: 20%;
      right: 10%;
    }

    #saxophone {
      bottom: 10%;
      left: 15%;
    }

    #controls {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }

    select,
    button {
      font-family: 'Bangers', cursive;
      font-size: 24px;
      padding: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: #FFD700;
      border: 2px solid #FFD700;
      border-radius: 10px;
      cursor: pointer;
    }

    button:hover {
      background-color: rgba(255, 215, 0, 0.3);
    }
  </style>
</head>

<body>
  <div id="countdown">00:00:00:000</div>
  <div id="controls">
    <select id="daySelect">
      <option value="A">A Day</option>
      <option value="B">B Day</option>
      <option value="C">C Day</option>
      <option value="D">D Day</option>
      <option value="E">E Day</option>
      <option value="F">F Day</option>
    </select>
    <select id="periodSelect">
      <option value="4">Period 4</option>
      <option value="5">Period 5</option>
    </select>
    <select id="gradeSelect">
      <option value="6">Grade 6</option>
      <option value="7">Grade 7</option>
      <option value="8">Grade 8</option>
    </select>
    <button id="setAlarmBtn">Set Alarm</button>
  </div>
  <audio id="alarmSound" src="https://soundbible.com/grab.php?id=1542&amp;type=mp3"></audio>
  <img id="trumpet" class="instrument" src="https://static.vecteezy.com/system/resources/previews/026/844/930/non_2x/trumpet-musical-instrument-clipart-on-transparent-background-acoustic-brass-musical-instruments-classical-and-jazz-musical-instrument-marching-bands-musical-instrument-clipart-free-png.png" alt="Trumpet">
  <img id="clarinet" class="instrument" src="https://jpmusicalinstruments.com/cdn/shop/files/101878_full_8875577f-4fea-4c10-81bd-446bc1f2e363_800x.png?v=1712136293" alt="Clarinet">
  <img id="saxophone" class="instrument" src="https://png.pngtree.com/png-vector/20230904/ourmid/pngtree-saxophone-isolated-on-white-music-png-image_9980860.png" alt="Saxophone">
  <script>
    (function() {
      const GG_ALL_GAME_CONFIG = {
        alarmTimes: {
          // Day, Period, Grade: Time
          'A,4,6': '8:58',
          'A,5,6': '9:38',
          'A,4,7': '10:23',
          'A,5,7': '11:04',
          'A,4,8': '13:42',
          'A,5,8': '14:20',
          'B,4,6': '13:39',
          'B,5,6': '14:20',
          'B,4,7': '9:01',
          'B,5,7': '9:41',
          'B,4,8': '10:26',
          'B,5,8': '11:07',
          'C,4,6': '8:58',
          'C,5,6': '9:38',
          'C,4,7': '13:40',
          'C,5,7': '14:20',
          'C,4,8': '10:26',
          'C,5,8': '11:07',
          'D,4,6': '12:16',
          'D,5,6': '12:57',
          'D,4,7': '13:40',
          'D,5,7': '14:20',
          'D,4,8': '9:04',
          'D,5,8': '9:44',
          'E,4,6': '10:20',
          'E,5,6': '11:01',
          'E,4,7': '11:45',
          'E,5,7': '13:00',
          'E,4,8': '13:42',
          'E,5,8': '14:20',
          'F,4,6': '8:58',
          'F,5,6': '9:38',
          'F,4,7': '10:23',
          'F,5,7': '11:04',
          'F,4,8': '11:48',
          'F,5,8': '12:30'
        }
      };
      let countdownInterval;
      let alarmTime;

      function startCountdown() {
        clearInterval(countdownInterval);
        countdownInterval = setInterval(() => {
          const now = new Date();
          const timeLeft = alarmTime - now;
          if (timeLeft > 0) {
            const hoursLeft = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutesLeft = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const secondsLeft = Math.floor((timeLeft % (1000 * 60)) / 1000);
            const millisecondsLeft = Math.floor((timeLeft % 1000));
            document.getElementById('countdown').textContent =
              `${hoursLeft.toString().padStart(2, '0')}:${minutesLeft.toString().padStart(2, '0')}:${secondsLeft.toString().padStart(2, '0')}:${millisecondsLeft.toString().padStart(3, '0')}`;
          } else {
            clearInterval(countdownInterval);
            document.getElementById('countdown').textContent = "00:00:00:000";
            document.getElementById('alarmSound').play();
          }
        }, 10);
      }

      function setAlarm() {
        const day = document.getElementById('daySelect').value;
        const period = document.getElementById('periodSelect').value;
        const grade = document.getElementById('gradeSelect').value;
        const timeKey = `${day},${period},${grade}`;
        const alarmTimeString = GG_ALL_GAME_CONFIG.alarmTimes[timeKey];
        if (alarmTimeString) {
          const [hours, minutes] = alarmTimeString.split(':');
          const now = new Date();
          alarmTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes);
          if (alarmTime <= now) {
            alarmTime.setDate(alarmTime.getDate() + 1);
          }
          startCountdown();
        } else {
          alert('Invalid time combination');
        }
      }
      document.getElementById('setAlarmBtn').addEventListener('click', setAlarm);
      // Save game state
      function saveGame(gameState) {
        const saveGameEvent = {
          type: 'REQUEST_SAVE_GAME_EVENT',
          save_data: gameState
        };
        window.parent.postMessage(saveGameEvent, '*');
      }
      // Load game state
      function loadGame() {
        const loadGameEvent = {
          type: 'REQUEST_LOAD_GAME_EVENT'
        };
        window.parent.postMessage(loadGameEvent, '*')
      }
      // Handle load
      window.addEventListener('message', (event) => {
        const {
          type,
          save_data
        } = event.data;
        if (type === 'RESPONSE_LOAD_GAME_EVENT') {
          // Implement game state loading logic here
          console.log('Loaded game state:', save_data);
        }
      });
      // Initial load attempt
      loadGame();
    })();
  </script>

</body>

</html>
